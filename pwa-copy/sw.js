const publicPath="/pwa-copy/",cacheName="Test-v1",cacheList=[publicPath],preCache=async()=>(await caches.open("Test-v1")).addAll(cacheList);self.addEventListener("install",(e=>{console.log("install"),e.waitUntil(preCache())}));const getCacheResponse=async e=>{const t=await caches.open("Test-v1");return await t.match(e)},getRequestResponse=async e=>{try{const t=await fetch(e);return console.log("updateCache",e),(await caches.open("Test-v1")).put(e,t.clone()),t}catch(e){return console.error(e),null}},cacheFirst=async e=>await getCacheResponse(e)||await getRequestResponse(e),networkFirst=async e=>await getRequestResponse(e)||await getCacheResponse(e);self.addEventListener("fetch",(e=>{let{mode:t,url:a}=e.request;console.log("request",t,a),"navigate"===t&&(a=`${location.origin}${publicPath}`,console.log("->",a)),e.respondWith(cacheFirst(a))}));