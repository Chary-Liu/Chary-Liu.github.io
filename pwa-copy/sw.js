const publicPath="/pwa-copy/",cacheName="pwa-copy-1.0.1",cacheList=[publicPath],preCache=async()=>(await caches.open(cacheName)).addAll(cacheList);self.addEventListener("install",(e=>{console.log("install"),e.waitUntil(preCache())}));const getCacheResponse=async e=>{const a=await caches.open(cacheName);return await a.match(e)},getRequestResponse=async e=>{try{const a=await fetch(e);return console.log("updateCache",e),(await caches.open(cacheName)).put(e,a.clone()),a}catch(e){return console.error(e),null}},cacheFirst=async e=>await getCacheResponse(e)||await getRequestResponse(e),networkFirst=async e=>await getRequestResponse(e)||await getCacheResponse(e);self.addEventListener("fetch",(e=>{let{mode:a,url:t}=e.request;console.log("request",a,t),"navigate"===a&&(t=`${location.origin}${publicPath}`,console.log("->",t)),e.respondWith(networkFirst(t))}));